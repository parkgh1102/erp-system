# ğŸ‰ ERP ì‹œìŠ¤í…œ Azure ë°°í¬ ì™„ë£Œ - ìµœì¢… ì •ë¦¬

ë°°í¬ ì™„ë£Œ ë‚ ì§œ: 2025-12-05
ë°°í¬ í™˜ê²½: Azure (Korea Central / East Asia)

---

## ğŸŒ ì ‘ì† URL

### í”„ë¡ íŠ¸ì—”ë“œ
- **ë©”ì¸ ë„ë©”ì¸:** https://www.webapperp.ai.kr âœ…
- **Azure ë„ë©”ì¸:** https://white-ocean-03a1f7000.3.azurestaticapps.net âœ…

### ë°±ì—”ë“œ API
- **API ë„ë©”ì¸:** https://api.webapperp.ai.kr/api âœ…
- **Azure ë„ë©”ì¸:** https://erp-backend-app.azurewebsites.net/api âœ…

### ê´€ë¦¬ í¬í„¸
- **Azure Portal:** https://portal.azure.com
- **GitHub ì €ì¥ì†Œ:** https://github.com/parkgh1102/erp-system
- **GitHub Actions:** https://github.com/parkgh1102/erp-system/actions

---

## âœ… ì™„ë£Œëœ ì„¤ì •

### 1. ì¸í”„ë¼ ë°°í¬
- âœ… Azure Static Web Apps (í”„ë¡ íŠ¸ì—”ë“œ)
- âœ… Azure App Service (ë°±ì—”ë“œ)
- âœ… PostgreSQL Flexible Server (ë°ì´í„°ë² ì´ìŠ¤)
- âœ… Application Insights (ëª¨ë‹ˆí„°ë§)

### 2. ë„ë©”ì¸ ë° SSL
- âœ… www.webapperp.ai.kr - SSL ì¸ì¦ì„œ ë°œê¸‰ ì™„ë£Œ
- âœ… api.webapperp.ai.kr - CNAME ë ˆì½”ë“œ ì„¤ì • ì™„ë£Œ
- âš ï¸ webapperp.ai.kr (ë£¨íŠ¸) - DNS ë¦¬ë‹¤ì´ë ‰íŠ¸ í•„ìš” (ê°€ì´ë“œ ì œê³µ)

### 3. ë³´ì•ˆ ì„¤ì •
- âœ… HTTPS/SSL ê°•ì œ ì ìš©
- âœ… Content Security Policy ì„¤ì •
- âœ… CORS ì •ì±… êµ¬ì„±
- âœ… ë³´ì•ˆ í—¤ë” ì„¤ì • (HSTS, X-Frame-Options ë“±)

### 4. ì„±ëŠ¥ ìµœì í™”
- âœ… ê¸€ë¡œë²Œ CDN (Azure Static Web Apps ë‚´ì¥)
- âœ… ì •ì  ë¦¬ì†ŒìŠ¤ ìºì‹± (1ë…„)
- âœ… ì´ë¯¸ì§€/JS/CSS ìµœì í™”

### 5. ë°±ì—… ë° ë³µêµ¬
- âœ… PostgreSQL ìë™ ë°±ì—… (30ì¼ ë³´ì¡´)
- âœ… Point-in-time ë³µêµ¬ ê°€ëŠ¥

### 6. ëª¨ë‹ˆí„°ë§
- âœ… Application Insights ì„¤ì •
- âœ… ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë° í™œì„±í™”
- âœ… ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

### 7. CI/CD
- âœ… GitHub Actions ìë™ ë°°í¬
- âœ… í”„ë¡ íŠ¸ì—”ë“œ ìë™ ë¹Œë“œ/ë°°í¬
- âœ… ë°±ì—”ë“œ ìë™ ë¹Œë“œ/ë°°í¬
- âœ… í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

---

## ğŸ“Š í˜„ì¬ ë¦¬ì†ŒìŠ¤ êµ¬ì„±

### Resource Group: erp-system-rg

| ë¦¬ì†ŒìŠ¤ ì´ë¦„ | íƒ€ì… | ìœ„ì¹˜ | ìƒíƒœ |
|------------|------|------|------|
| erp-frontend | Static Web Apps | East Asia | ì‹¤í–‰ ì¤‘ âœ… |
| erp-backend-app | App Service | Korea Central | ì‹¤í–‰ ì¤‘ âœ… |
| erp-backend-plan | App Service Plan (B1) | Korea Central | ì‹¤í–‰ ì¤‘ âœ… |
| erp-postgres-gaonfs | PostgreSQL Flexible Server | Korea Central | ì‹¤í–‰ ì¤‘ âœ… |
| erp-insights | Application Insights | Korea Central | ì‹¤í–‰ ì¤‘ âœ… |

---

## ğŸ’° ì›”ê°„ ì˜ˆìƒ ë¹„ìš©

| í•­ëª© | ìŠ¤í™ | ì›” ë¹„ìš© (â‚©) |
|------|------|------------|
| Static Web Apps | Free í‹°ì–´ | 0 |
| App Service Plan | Basic B1 | 20,000 |
| PostgreSQL | Burstable B1ms | 15,000 |
| ìŠ¤í† ë¦¬ì§€ (32GB) | PostgreSQL | í¬í•¨ |
| Application Insights | 5GB/ì›” ë¬´ë£Œ | 0 |
| ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ | ~50GB/ì›” | 2,000 |
| **ì´ ì˜ˆìƒ** | | **37,000** |

**ì°¸ê³ :** ì‹¤ì œ ë¹„ìš©ì€ ì‚¬ìš©ëŸ‰ì— ë”°ë¼ ë³€ë™ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ”§ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

### í”„ë¡ íŠ¸ì—”ë“œ (GitHub Actions)
```yaml
VITE_API_URL: https://api.webapperp.ai.kr/api
VITE_APP_ENV: production
VITE_APP_NAME: ERP í†µí•©ì‹œìŠ¤í…œ
VITE_APP_VERSION: 1.0.0
```

### ë°±ì—”ë“œ (App Service)
```
NODE_ENV: production
PORT: 8080
DB_TYPE: postgres
DB_HOST: erp-postgres-gaonfs.postgres.database.azure.com
DB_PORT: 5432
DB_DATABASE: erp_system
DB_SSL: true
JWT_SECRET: [REDACTED]
APPLICATIONINSIGHTS_CONNECTION_STRING: [REDACTED]
```

---

## ğŸ“ ì£¼ìš” ì„¤ì • íŒŒì¼

### 1. GitHub Actions ì›Œí¬í”Œë¡œìš°
- `.github/workflows/azure-static-web-apps-white-ocean-03a1f7000.yml`
- `.github/workflows/azure-backend-deploy.yml`

### 2. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •
- `frontend/public/staticwebapp.config.json` - Static Web Apps ì„¤ì •
- `frontend/index.html` - CSP ì •ì±…
- `frontend/vite.config.ts` - ë¹Œë“œ ì„¤ì •

### 3. ë°±ì—”ë“œ ì„¤ì •
- `backend/src/index.ts` - CORS, ë³´ì•ˆ í—¤ë”
- `backend/package.json` - ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸

### 4. ë¬¸ì„œ
- `AZURE_DEPLOYMENT_GUIDE.md` - ë°°í¬ ê°€ì´ë“œ
- `DNS_ì„¤ì •_ê°€ì´ë“œ.md` - DNS ì„¤ì • ê°€ì´ë“œ
- `ë£¨íŠ¸ë„ë©”ì¸_ì„¤ì •_ê°€ì´ë“œ.md` - ë£¨íŠ¸ ë„ë©”ì¸ ì„¤ì •
- `ë¹„ìš©ì•Œë¦¼_ì„¤ì •_ê°€ì´ë“œ.md` - ë¹„ìš© ëª¨ë‹ˆí„°ë§ ì„¤ì •

---

## ğŸš€ ë°°í¬ í”„ë¡œì„¸ìŠ¤

### ìë™ ë°°í¬ íŠ¸ë¦¬ê±°

1. **í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬**
   - `main` ë¸Œëœì¹˜ì— Push â†’ GitHub Actions ìë™ ì‹¤í–‰
   - ë¹Œë“œ ì‹œê°„: ~5-10ë¶„
   - ë°°í¬ í›„ ìë™ CDN ìºì‹œ ê°±ì‹ 

2. **ë°±ì—”ë“œ ë°°í¬**
   - `backend/**` íŒŒì¼ ë³€ê²½ ì‹œ ìë™ ë°°í¬
   - ë¹Œë“œ ì‹œê°„: ~3-5ë¶„
   - TypeScript ì»´íŒŒì¼ í›„ ë°°í¬

### ìˆ˜ë™ ë°°í¬

```bash
# í”„ë¡ íŠ¸ì—”ë“œ
cd frontend
npm run build
# Azure Static Web Apps CLIë¡œ ë°°í¬

# ë°±ì—”ë“œ
cd backend
npm run build
# Azure CLIë¡œ ZIP ë°°í¬
```

---

## ğŸ“ˆ ëª¨ë‹ˆí„°ë§ ë° ë¡œê·¸

### Application Insights ëŒ€ì‹œë³´ë“œ

1. Azure Portal â†’ Application Insights â†’ erp-insights
2. ì£¼ìš” ë©”íŠ¸ë¦­:
   - ìš”ì²­ ì²˜ë¦¬ ì‹œê°„
   - ì‹¤íŒ¨ìœ¨
   - ì‚¬ìš©ì ìˆ˜
   - ì˜ˆì™¸/ì˜¤ë¥˜

### ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸

**ë°±ì—”ë“œ:**
```bash
az webapp log tail \
  --name erp-backend-app \
  --resource-group erp-system-rg
```

**ë°ì´í„°ë² ì´ìŠ¤:**
```bash
az postgres flexible-server show \
  --name erp-postgres-gaonfs \
  --resource-group erp-system-rg
```

### GitHub Actions ë¡œê·¸

https://github.com/parkgh1102/erp-system/actions

---

## ğŸ”’ ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

- âœ… HTTPS ê°•ì œ ì ìš©
- âœ… SSL ì¸ì¦ì„œ ìë™ ê°±ì‹ 
- âœ… CORS ì •ì±… ì„¤ì •
- âœ… CSP (Content Security Policy)
- âœ… ë³´ì•ˆ í—¤ë” (HSTS, X-Frame-Options, X-XSS-Protection)
- âœ… ë°ì´í„°ë² ì´ìŠ¤ SSL ì—°ê²°
- âœ… í™˜ê²½ ë³€ìˆ˜ ì•”í˜¸í™” ì €ì¥
- âœ… JWT í† í° ì¸ì¦
- âœ… Rate Limiting
- âœ… ë°©í™”ë²½ ê·œì¹™ (ë°ì´í„°ë² ì´ìŠ¤)

---

## ğŸ› ï¸ ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ

### ì¼ì¼ ì‘ì—…
- GitHub Actions ë°°í¬ ìƒíƒœ í™•ì¸
- Application Insights ì˜¤ë¥˜ ëª¨ë‹ˆí„°ë§

### ì£¼ê°„ ì‘ì—…
- ë¡œê·¸ ê²€í† 
- ì„±ëŠ¥ ë©”íŠ¸ë¦­ í™•ì¸
- ë³´ì•ˆ ì—…ë°ì´íŠ¸ ì ìš©

### ì›”ê°„ ì‘ì—…
- ë¹„ìš© ë¶„ì„ ë° ìµœì í™”
- ë°±ì—… í…ŒìŠ¤íŠ¸
- ë°ì´í„°ë² ì´ìŠ¤ ì •ë¦¬
- ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ ì •ë¦¬

### ë¶„ê¸°ë³„ ì‘ì—…
- ë³´ì•ˆ ê°ì‚¬
- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- ì¬í•´ ë³µêµ¬ í›ˆë ¨
- ì˜ì¡´ì„± ì—…ë°ì´íŠ¸

---

## ğŸ”„ ë°±ì—… ë° ë³µêµ¬

### ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…

**ìë™ ë°±ì—…:**
- ë§¤ì¼ ìë™ ë°±ì—… (30ì¼ ë³´ì¡´)
- Point-in-time ë³µêµ¬ ê°€ëŠ¥
- ìµœì´ˆ ë³µì› ë‚ ì§œ: 2025-12-03

**ìˆ˜ë™ ë°±ì—…:**
```bash
# ë°±ì—… ìƒì„±
az postgres flexible-server backup create \
  --name erp-postgres-gaonfs \
  --resource-group erp-system-rg \
  --backup-name manual-backup-$(date +%Y%m%d)
```

**ë³µêµ¬:**
```bash
# Point-in-time ë³µêµ¬
az postgres flexible-server restore \
  --resource-group erp-system-rg \
  --name erp-postgres-restored \
  --source-server erp-postgres-gaonfs \
  --restore-time "2025-12-04T10:00:00Z"
```

### ì½”ë“œ ë°±ì—…

- âœ… GitHub ì €ì¥ì†Œ (ìë™ ë²„ì „ ê´€ë¦¬)
- âœ… Git íƒœê·¸ë¡œ ë¦´ë¦¬ìŠ¤ ê´€ë¦¬
- âœ… ì£¼ìš” ë§ˆì¼ìŠ¤í†¤ë§ˆë‹¤ ë¦´ë¦¬ìŠ¤ ìƒì„±

---

## ğŸ“ ë¬¸ì œ í•´ê²°

### í”„ë¡ íŠ¸ì—”ë“œê°€ ë¡œë“œë˜ì§€ ì•Šì„ ë•Œ

1. **DNS í™•ì¸**
   ```bash
   nslookup www.webapperp.ai.kr
   ```

2. **Static Web Apps ìƒíƒœ í™•ì¸**
   ```bash
   az staticwebapp show \
     --name erp-frontend \
     --resource-group erp-system-rg
   ```

3. **ë°°í¬ ë¡œê·¸ í™•ì¸**
   - GitHub Actions ë¡œê·¸ í™•ì¸
   - ë¹Œë“œ ì˜¤ë¥˜ ì—¬ë¶€ í™•ì¸

### ë°±ì—”ë“œ API ì‘ë‹µ ì—†ì„ ë•Œ

1. **App Service ìƒíƒœ í™•ì¸**
   ```bash
   az webapp show \
     --name erp-backend-app \
     --resource-group erp-system-rg \
     --query state
   ```

2. **ë¡œê·¸ í™•ì¸**
   ```bash
   az webapp log tail \
     --name erp-backend-app \
     --resource-group erp-system-rg
   ```

3. **ì¬ì‹œì‘**
   ```bash
   az webapp restart \
     --name erp-backend-app \
     --resource-group erp-system-rg
   ```

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨

1. **ë°©í™”ë²½ ê·œì¹™ í™•ì¸**
   ```bash
   az postgres flexible-server firewall-rule list \
     --name erp-postgres-gaonfs \
     --resource-group erp-system-rg
   ```

2. **ì„œë²„ ìƒíƒœ í™•ì¸**
   ```bash
   az postgres flexible-server show \
     --name erp-postgres-gaonfs \
     --resource-group erp-system-rg
   ```

---

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### ê³µì‹ ë¬¸ì„œ
- [Azure Static Web Apps](https://docs.microsoft.com/azure/static-web-apps/)
- [Azure App Service](https://docs.microsoft.com/azure/app-service/)
- [Azure Database for PostgreSQL](https://docs.microsoft.com/azure/postgresql/)
- [Application Insights](https://docs.microsoft.com/azure/azure-monitor/app/app-insights-overview)

### ì»¤ë®¤ë‹ˆí‹°
- [Azure í•œêµ­ ì‚¬ìš©ì ê·¸ë£¹](https://www.facebook.com/groups/krazure/)
- [Stack Overflow - Azure](https://stackoverflow.com/questions/tagged/azure)

### ì§€ì›
- [Azure ì§€ì› í‹°ì¼“](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade)
- [Azure Status](https://status.azure.com/)

---

## âš ï¸ ì‚¬ìš©ì ì•¡ì…˜ í•„ìš”

### 1. ë£¨íŠ¸ ë„ë©”ì¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì„¤ì • (ê¶Œì¥)

DNS ê´€ë¦¬ í™”ë©´ì—ì„œ:
```
webapperp.ai.kr â†’ https://www.webapperp.ai.kr (301 ë¦¬ë‹¤ì´ë ‰íŠ¸)
```

ğŸ“„ **ê°€ì´ë“œ:** `ë£¨íŠ¸ë„ë©”ì¸_ì„¤ì •_ê°€ì´ë“œ.md`

### 2. ë¹„ìš© ì•Œë¦¼ ì„¤ì • (ê¶Œì¥)

Azure Portalì—ì„œ ì›”ê°„ ì˜ˆì‚° ì„¤ì •:
```
Cost Management â†’ Budgets â†’ Create
ì›”ê°„ ì˜ˆì‚°: â‚©100,000
ì•Œë¦¼: 80%, 90%, 100%
```

ğŸ“„ **ê°€ì´ë“œ:** `ë¹„ìš©ì•Œë¦¼_ì„¤ì •_ê°€ì´ë“œ.md`

---

## âœ¨ ì„±ê³µì ìœ¼ë¡œ ë°°í¬ ì™„ë£Œ!

ERP ì‹œìŠ¤í…œì´ Azureì— ì„±ê³µì ìœ¼ë¡œ ë°°í¬ë˜ì—ˆìœ¼ë©°, ë‹¤ìŒì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤:

- âœ… ê³ ê°€ìš©ì„± ì•„í‚¤í…ì²˜
- âœ… ìë™ ìŠ¤ì¼€ì¼ë§ ê°€ëŠ¥
- âœ… ê¸€ë¡œë²Œ CDNìœ¼ë¡œ ë¹ ë¥¸ ì„±ëŠ¥
- âœ… ìë™ ë°±ì—… ë° ë³µêµ¬
- âœ… ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- âœ… CI/CD íŒŒì´í”„ë¼ì¸
- âœ… ë³´ì•ˆ ê°•í™” (HTTPS, CSP, CORS)

**ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰**

---

## ğŸ“ ë²„ì „ ê¸°ë¡

| ë‚ ì§œ | ë²„ì „ | ë³€ê²½ ì‚¬í•­ |
|------|------|-----------|
| 2025-12-05 | 1.0.0 | ì´ˆê¸° Azure ë°°í¬ ì™„ë£Œ |
| 2025-12-05 | 1.0.1 | í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì¶”ê°€ |
| 2025-12-05 | 1.0.2 | CSP ì˜¤ë¥˜ ìˆ˜ì • (API URL ë³€ê²½) |
| 2025-12-05 | 1.0.3 | ìºì‹± ìµœì í™” ì„¤ì • ì¶”ê°€ |
| 2025-12-05 | 1.0.4 | Application Insights ì—°ë™ |

---

**ë¬¸ì„œ ì‘ì„±ì¼:** 2025-12-05
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** 2025-12-05
**ë‹´ë‹¹ì:** Claude Code Assistant
